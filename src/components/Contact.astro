---
import FormGroup from './FormGroup.astro'
---

<section id="contact">
  <header><h3 class="section-title">Contact</h3></header>
  <main>
    <form id="contact-form" class="scroll-reveal opacity-reveal">
      <!-- <FormGroup>
        <label for="name">Name</label>
        <input
          value=""
          autocomplete="off"
          placeholder="Enter your name..."
          type="text"
          name="name"
          id="name"
        />
      </FormGroup> -->
      <FormGroup>
        <label for="subject">Subject</label>
        <input
          value=""
          autocomplete="off"
          placeholder="Enter the subject of the email..."
          type="text"
          name="subject"
          id="subject"
        />
      </FormGroup>
      <FormGroup>
        <label for="message">Message</label>
        <textarea
          cols="5"
          autocomplete="off"
          placeholder="Enter your message..."
          name="message"
          id="message"></textarea>
      </FormGroup>
      <FormGroup>
        <button id="button-submit" title="Send email" type="submit">
          Send</button
        >
      </FormGroup>
    </form>
  </main>
</section>

<style>
  .opacity-reveal {
    opacity: 0;
  }
  .active {
    opacity: 1;
  }
  label {
    color: #eee;
    font-size: 18px;
  }
  input {
    height: auto;
  }
  input,
  textarea {
    width: 100%;
    background-color: #ccc;
    font-family: sans-serif;
    padding: 8px 8px;
    border: none;
    outline: none;
    border-radius: 4px;
    transition: background-color 0.2s;
    caret-color: #075f45;
  }

  textarea {
    min-height: 100px;
    resize: vertical;
  }
  input:focus,
  textarea:focus {
    background-color: #fff;
  }
  main {
    display: flex;
    justify-content: center;
    align-items: center;
  }
  #contact-form {
    width: 100%;
    max-width: 340px;
    padding: 40px 40px;

    border: 1px solid var(--footer-background-color);
    background-color: #487ce41e;
    border-radius: 12px;

    display: flex;
    flex-direction: column;
    gap: 24px;

    transition: opacity 0.5s ease-in;
  }
  #button-submit {
    justify-self: center;
    width: 100%;
    height: 30px;
    font-size: 18px;
    font-weight: 800;
    outline: none;
    border: none;
    background-color: var(--footer-background-color);
    /* opacity: 75%; */
    color: #fff;
    border-radius: 6px;
    cursor: pointer;
  }
  @media (hover: hover) {
    #button-submit:hover {
      background-color: var(--button-hover-color);
    }
  }
  #button-submit:active {
    background-color: var(--button-active-color);
    transform: scale(0.99);
  }
  @media (max-width: 320px) {
    #contact-form {
      padding: 40px 10px;
      border-left: none;
      border-right: none;
    }
  }
</style>

<script>
  const submitButton = document.getElementById('button-submit')
  const handleSubmitForm = (event: Event) => {
    event.preventDefault()

    // const nameInput = document.getElementById('name') as HTMLInputElement
    const subjectInput = document.getElementById('subject') as HTMLInputElement
    const messageTextarea = document.getElementById(
      'message'
    ) as HTMLTextAreaElement

    const { value: subject } = subjectInput
    // const { value: name } = nameInput
    const { value: message } = messageTextarea

    // TODO: Handle empty field
    if (subject === '' || message === '') return

    window.open(
      `mailto:lucasgazzola1@outlook.com?subject=${subject}&body=${message}`
    )
    // Clean the inputs
    // nameInput.value = ''
    subjectInput.value = ''
    messageTextarea.value = ''
  }
  submitButton?.addEventListener('click', handleSubmitForm)
</script>
